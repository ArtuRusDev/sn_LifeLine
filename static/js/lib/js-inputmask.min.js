window.addEventListener("DOMContentLoaded",function(){[].forEach.call(document.querySelectorAll(".tel"),function(e){function t(e){this.selectionStart=this.selectionEnd=this.value.length,e.keyCode&&(n=e.keyCode),this.selectionStart<3&&e.preventDefault();var t="+7 (___) ___-__-__",l=0,a=t.replace(/\D/g,""),i=this.value.replace(/\D/g,""),r=t.replace(/[_\d]/g,function(e){return l<i.length?i.charAt(l++)||a.charAt(l):e});-1!=(l=r.indexOf("_"))&&(l<5&&(l=3),r=r.slice(0,l));var s=t.substr(0,this.value.length).replace(/_+/g,function(e){return"\\d{1,"+e.length+"}"}).replace(/[+()]/g,"\\$&");(!(s=new RegExp("^"+s+"$")).test(this.value)||this.value.length<5||n>47&&n<58)&&(this.value=r),"blur"==e.type&&this.value.length<5&&(this.value="")}var n;e.addEventListener("input",t,!1),e.addEventListener("focus",t,!1),e.addEventListener("blur",t,!1),e.addEventListener("keydown",t,!1)})});